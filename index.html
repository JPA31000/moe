<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ma√Ætre d'≈ìuvre ‚Äì Jeu TEBAA</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">TEBAA ‚Ä¢ Ma√Ætre d'≈ìuvre</div>
    <div class="progressbar" aria-label="Progression">
      <div id="progress-fill" class="progress"></div>
    </div>
    <div class="top-actions">
      <button id="help-btn" class="ghost sm" title="Aide (Raccourcis)">? Aide</button>
    </div>
  </header>

  <div id="start-screen" class="screen">
    <h1>Jeu d'apprentissage</h1>
    <p class="subtitle">Lecture de plan ‚Ä¢ Phasage ‚Ä¢ M√©tiers ‚Ä¢ Vocabulaire</p>

    <div class="grid-2">
      <div>
        <div class="form-row">
          <label for="player-name">Nom / Pr√©nom</label>
          <input id="player-name" type="text" placeholder="Ex: Dupont Jeanne" />
        </div>
        <div class="form-row">
          <label for="player-class">Classe</label>
          <select id="player-class">
            <option value="2EMNB">2EMNB</option>
            <option value="1AA">1AA</option>
          </select>
        </div>
      </div>
      <div>
        <fieldset class="fieldset">
          <legend>Options</legend>
          <label class="check"><input id="opt-eval" type="checkbox" checked> Mode √©valuation (explication apr√®s validation)</label>
          <label class="check"><input id="opt-icons" type="checkbox" checked> Ic√¥nes SVG pour le vocabulaire</label>
          <label class="check"><input id="opt-leader" type="checkbox" checked> Classement local (Top 10 par classe)</label>
        </fieldset>
      </div>
    </div>

    <div class="actions">
      <button id="start-btn" class="primary lg">D√©marrer (‚å® Entr√©e)</button>
    </div>
    <p class="hint">üí° En local sans serveur, si le navigateur bloque <code>data.json</code>, le jeu passe en <em>mode hors-ligne</em> (donn√©es int√©gr√©es).</p>
  </div>

  <div id="game-screen" class="screen hidden" aria-live="polite">
    <div id="hud">
      <div class="hud-item"><strong id="timer">‚è± 3:00</strong></div>
      <div class="hud-item"><strong id="score">Score : 0,0 / 20</strong></div>
      <div class="hud-item"><strong id="progress">Carte 0/10</strong></div>
      <div class="hud-item">
        <label for="zoom-range">Zoom</label>
        <input id="zoom-range" type="range" min="80" max="140" value="100" />
      </div>
    </div>

    <div id="prompt" class="card"></div>

    <div class="layout">
      <aside id="bank-side" class="side"></aside>
      <main id="game-area" class="game-area"></main>
    </div>

    <div id="controls" class="controls">
      <button id="validate-btn" class="success" title="Corriger la carte" disabled>Valider (Entr√©e)</button>
      <button id="undo-btn" class="ghost" title="Annuler le dernier mouvement" disabled>Annuler (Ctrl+Z)</button>
      <button id="skip-btn" class="ghost" title="Passer cette carte (‚àí0,5)">Passer (S)</button>
    </div>

    <div id="explain" class="explain" aria-live="polite"></div>
  </div>

  <div id="end-screen" class="screen hidden">
    <h2>R√©sultat</h2>
    <p id="final-score"></p>

    <div class="actions">
      <button id="download-csv" class="primary">T√©l√©charger le CSV</button>
      <button id="restart-btn" class="ghost">Rejouer</button>
    </div>

    <details class="details">
      <summary>D√©tails de la session</summary>
      <pre id="session-details"></pre>
    </details>

    <div id="leaderboard" class="leaderboard hidden">
      <h3>Classement (Top 10 ‚Äì <span id="lb-class"></span>)</h3>
      <table>
        <thead><tr><th>#</th><th>Nom</th><th>Score /20</th><th>Date</th></tr></thead>
        <tbody id="lb-body"></tbody>
      </table>
    </div>
  </div>

  <dialog id="help-dialog">
    <h3>Aide & Raccourcis</h3>
    <ul>
      <li><b>Entr√©e</b> : Valider la carte</li>
      <li><b>S</b> : Passer la carte</li>
      <li><b>Ctrl+Z</b> : Annuler le dernier mouvement</li>
      <li><b>Molette / Curseur Zoom</b> : Ajuster la taille de la grille</li>
    </ul>
    <button id="help-close" class="primary">OK</button>
  </dialog>

  <script src="game.js"></script>
<div id="toast" class="hidden" role="status" aria-live="polite"></div>
</body>
</html>
