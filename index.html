<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TEBAA – Plan de chantier (plan unique)</title>
  <link rel="stylesheet" href="styles.css?v=6" />
</head>
<body>
  <header class="topbar">
    <div class="brand">TEBAA • Plan de chantier</div>
    <div class="progressbar" aria-label="Progression"><div id="progress-fill" class="progress"></div></div>
    <div class="top-actions"><button id="help-btn" class="ghost sm">? Aide</button></div>
  </header>

  <div id="start-screen" class="screen">
    <h1>Implantation sur plan (100 % plan)</h1>
    <p class="subtitle">Glisse les étiquettes au bon endroit sur le plan. Tolérance activée.</p>

    <div class="grid-2">
      <div>
        <div class="form-row">
          <label for="player-name">Nom / Prénom</label>
          <input id="player-name" type="text" placeholder="Ex: Dupont Jeanne" />
        </div>
        <div class="form-row">
          <label for="player-class">Classe</label>
          <select id="player-class">
            <option value="2EMNB">2EMNB</option>
            <option value="1AA">1AA</option>
          </select>
        </div>
      </div>
      <div>
        <fieldset class="fieldset">
          <legend>Options</legend>
          <label class="check"><input id="opt-eval" type="checkbox" checked> Mode évaluation</label>
          <label class="check"><input id="opt-icons" type="checkbox" checked> Icônes SVG sur les étiquettes</label>
          <label class="check"><input id="opt-leader" type="checkbox" checked> Classement local</label>
        </fieldset>
      </div>
    </div>

    <div class="actions">
      <button id="start-btn" class="primary lg">Démarrer</button>
    </div>

    <footer class="version">Version Plan v2 — plan unique, 8 éléments</footer>
  </div>

  <div id="game-screen" class="screen hidden">
    <div id="hud">
      <div class="hud-item"><strong id="timer">⏱ 3:00</strong></div>
      <div class="hud-item"><strong id="score">Score : 0,0 / 20</strong></div>
      <div class="hud-item"><strong id="progress">Carte 0/1</strong></div>
      <div class="hud-item">
        <label for="zoom-range">Zoom</label>
        <input id="zoom-range" type="range" min="60" max="160" value="100" />
      </div>
    </div>

    <div id="prompt" class="card"></div>
    <div id="rule-banner" class="rule-banner hidden"></div>

    <div class="layout">
      <aside id="bank-side" class="side">
        <div id="checklist" class="checklist">
          <h4>À placer</h4>
          <ul id="checklist-items"></ul>
          <button id="hint-btn" class="ghost sm" title="Zones indicatives (−0,2 pt)">Indice (−0,2)</button>
        </div>
      </aside>
      <main id="game-area" class="game-area"></main>
    </div>

    <div id="controls" class="controls">
      <button id="validate-btn" class="success" disabled>Valider (Entrée)</button>
      <button id="undo-btn" class="ghost" disabled>Annuler (Ctrl+Z)</button>
      <button id="skip-btn" class="ghost">Passer (S)</button>
    </div>

    <div id="explain" class="explain"></div>
  </div>

  <div id="end-screen" class="screen hidden">
    <h2>Résultat</h2>
    <p id="final-score"></p>
    <div class="actions">
      <button id="download-csv" class="primary">Télécharger le CSV</button>
      <button id="restart-btn" class="ghost">Rejouer</button>
    </div>
  </div>

  <dialog id="help-dialog">
    <h3>Aide</h3>
    <p>Glisser-déposer chaque étiquette sur le plan. La vérification accepte une tolérance autour des zones cibles.</p>
    <button id="help-close" class="primary">OK</button>
  </dialog>

  <div id="toast" class="toast hidden"></div>

  <script src="game.js?v=6"></script>
</body>
</html>
